comput math methods med comput math methods med cmmm computational and mathematical methods in medicine 1748 - 670x 1748 - 6718 hindawi publishing corporation 28163773 5253513 10.1155 / 2017 / 2938504 research article assessment of iterative closest point registration accuracy for different phantom surfaces captured by an optical 3d sensor in radiotherapy http :// orcid.org / 0000 - 0002 - 5526 - 0446 krell gerald 1 * http :// orcid.org / 0000 - 0001 - 8513 - 2261 saeid nezhad nazila 1 walke mathias 2 http :// orcid.org / 0000 - 0002 - 3632 - 2402 al - hamadi ayoub 1 gademann gunther 2 1institute for information technology and communication engineering , otto - von - guericke university magdeburg , universitatsplatz 2 , 39016 magdeburg , germany 2clinic for radiotherapy , otto - von - guericke university magdeburg , leipziger strabetae 44 , 39120 magdeburg , germany * gerald krell : krell @ ovgu.de academic editor : ayman el - baz 2017 9 1 2017 2017 2938504 4 7 2016 30 9 2016 25 10 2016 copyright ( c ) 2017 gerald krell et al .
2017 this is an open access article distributed under the creative commons attribution license , which permits unrestricted use , distribution , and reproduction in any medium , provided the original work is properly cited .
an optical 3d sensor provides an additional tool for verification of correct patient settlement on a tomotherapy treatment machine .
the patient 's position in the actual treatment is compared with the intended position defined in treatment planning .
a commercially available optical 3d sensor measures parts of the body surface and estimates the deviation from the desired position without markers .
the registration precision of the in - built algorithm and of selected icp ( iterative closest point ) algorithms is investigated on surface data of specially designed phantoms captured by the optical 3d sensor for predefined shifts of the treatment table .
a rigid body transform is compared with the actual displacement to check registration reliability for predefined limits .
the curvature type of investigated phantom bodies has a strong influence on registration result which is more critical for surfaces of low curvature .
we investigated the registration accuracy of the optical 3d sensor for the chosen phantoms and compared the results with selected unconstrained icp algorithms .
safe registration within the clinical limits is only possible for uniquely shaped surface regions , but error metrics based on surface normals improve translational registration .
large registration errors clearly hint at setup deviations , whereas small values do not guarantee correct positioning .
1. introduction tomotherapy combines a ct scanner with a computer - controlled radiation beam collimation system at the treatment machine [ 1 ] to precisely target tumors sparing healthy tissue .
the system installed in magdeburg hospital is a tomotherapy hd system which enables helical and fixed radiation in one single system .
a helical slit delivers radiation with most conformal image guided radiotherapy ( imrt ) .
the x - ray source rotates in a helical path around the patient in order to acquire a 3d image .
the same x - ray source is used as treatment beam .
this source is rotating in a helical pattern around the patient , while the intensity of beam is modulated according to the tumor shape using " tungsten leaves. " these leaves create thousands of beam elements , called " beamlets " [ 2 ] .
the radiation is delivered by a discrete - angle , nonrotational method sequentially moving the treatment table from the center of the system and for each angle of the gantry .
optical sensors provide an additional tool to verify the precise positioning of the radiation target relative to the treatment machine .
the actual position in the treatment fraction is compared with the desired position given by a previously recorded reference surface .
the reliability of such icp - based algorithms is investigated in this paper by comparing the results of the implementation by the optical sensor with selected popular algorithms .
2. methods and materials 2.1 .
optical sensors in tomotherapy nowadays , image guided methods are increasingly used in radiotherapy [ 3 - 11 ] .
the target regions of irradiation and the intended dose distributions are mostly defined on the basis of ct scans .
then an irradiation plan is created which involves the placement of the patient with regard to the treatment machine and the control of the irradiation beam .
the main aim is to hit the tumor with sufficient energy and to protect healthy tissue and organs as much as possible against irradiation at the same time .
exact placement of the patient in the irradiation session is therefore very important .
in addition to correct positioning by integrated ct in the treatment machine , optical sensors can capture surface data .
optical surface sensors hence provide an additional tool for contact - less verification of patient position and are now getting into clinical practice after a long - time development and use for scientific purposes .
our tomotherapy hd accelerator unit ( accuray , usa ) is combined with an alignrt ( visionrt ltd. , london , uk ) system and consists of two pods laterally positioned corresponding to the virtual isocenter in front of the tomotherapy bore .
the virtual isocenter lies 700 mm outside in front of to the real radiation isocenter of the machine .
the distances of the two pods in respect to the virtual isocenter are about 2.0 m. the two pods are tightly mounted at upper ceiling of the treatment room .
they are right and left of the tomotherapy couch .
each of the two units each consists of two cameras ( stereo ) and a speckle projector producing structured light ( figure 1 ( a )) to generate a 3d model of the patient 's surface by close - range photogrammetry ( triangulation ) [ 12 ] .
the unit also includes a texture camera for visualization purposes , which , however , is not used for alignment [ 3 ] .
the alignrt parameters of the optical system are estimated and verified by daily calibration using a calibration plate that is aligned with a virtual laser isocenter in front of the real isocenter .
real - time capability of the alignrt system relates to the ability of the sensor to capture surface data fast enough to even follow typical human motion caused by respiration , for example .
although tracking of the surface is fast enough to meet these requirements , the first registration takes longer and is therefore usually done offline .
the units are installed at the ceiling in the treatment room above of the treatment table and in front of the irradiation gantry in such a way that they capture the body surface at the target region ( isocenter ) diagonally downwards from two directions in order to reduce occluded regions ( figure 1 ( b )) .
the radiation gantry of the treatment machine is situated on one point of a circle around the isocenter parallel to the xz - axes .
the x , y , and z position of the treatment table at the radiation gantry can be shifted computer - controlled with an accuracy of about 0.5 mm. rotation of the treatment table is not possible , although in real situations rotational displacement of the patient must be expected .
an optical sensor of the considered type estimates a distance map related to a measured surface by finding correspondences in images taken from two or more directions by photogrammetric methods [ 12 , 13 ] .
a typical scheme is first to calculate a standard view of the recorded images by rectifying them on the basis of the camera parameters obtained by the previous calibration .
finding the correspondences in the images gives the disparity maps which describe the parallax caused by the distance between the cameras of one optical sensor .
together with camera calibration parameters the depth map is then calculated from the disparity map which can be considered as a mesh of 3d points or as a point cloud .
because the depth values are calculated corresponding to the pixel grid neighborhood relations are directly given and a mesh grid , for instance , consisting of triangles , can be easily calculated .
the surfaces of the two optical sensors of alignrt are merged in one data file .
at the transition of the surface data of one sensor to the other some overlapping or gaps may occur .
the software of the optical sensor handles these problems and produces a single more or less closed surface of triangles out of the data of the two sensors .
details are not given by the manufacturer .
rigid registration parameters for different snapshots of captured 3d surface data can be calculated by the propriety software .
optical sensors provide an additional modality to estimate the patient position on the basis of the outer body shape without increasing radiation load .
here we consider the application of the optical sensor without use of additional markers .
the surface data captured is therefore a point cloud or a mesh grid corresponding to pixels of the image sensor .
in such an unconstrained setting without markers , we just know that a surface point estimated by the optical sensor belongs to some corresponding point of the surface in the voxel image captured for definition of the 3d planning volume .
but the exact position of this corresponding point on the surface in this image , which is usually a ct scan , is not directly given .
this correspondence can only be estimated out of the form of the reference surface if it is successfully matched with the surface to be tested .
in this way corresponding regions are registered and transformation matrices are calculated representing a measure for the deviation between a reference and a test surface .
two operation modes of the surface sensor are distinguished in clinical practice : the static setup verification of patient ( single - frame surface acquisition ) and the tracking of patient motion ( continuous dynamic surface acquisition mode ) , for example , caused by respiration [ 3 ] .
in the latter case the solid assumption is appropriate if the time step from one surface capture to the next is small enough .
for real patients , the shape may also have been changed in the static setup phase introducing additional uncertainties in icp registration .
respiratory motion of a patient surface blurs the registration result which is an additional effect and should not be mixed with the uncertainty of icp registration .
motion blur in the 3d measurement results may cause additional problems .
our paper therefore considers the static case and shows that even with solid phantoms uncertainties remain depending on the individual shape .
2.2 .
principles of icp algorithms surface registration assumes that two or more surfaces can be matched by a geometrical transformation .
resulting transformation parameters then describe the deviation between the surfaces for a correct registration .
in case of radiotherapy , the optical sensor should ensure that the patient is placed according to the irradiation plan .
the desired position is usually defined on basis of the ct data set .
if we want to compare a test surface measured by optical sensors with the target position we would have to extract the corresponding surface data out of the ct as a reference .
tomotherapy gives us another option : because a ct is directly available at the treatment machine together with the optical sensor , we are able to bring the patient exactly to the desired position by the ct modality .
the surface scan of the optical sensor at this position can be considered as a reference ( target position ) .
in later treatment sessions , the memorized reference position can then be used to bring the patient back to the desired position by the measured test surface .
also during the irradiation itself the correct position can be verified by the optical surface scan because , in contrast to ct , optical data are available during the whole treatment .
2.2.1 .
known point - to - point correspondences the alignment of surfaces is much more simple and unique in case of known correspondences between reference and test surface .
this assumes that registered n points of the reference surface p i = p ( x i , y i , z i ) with index i = 1 ,... , n and spatial coordinates x i , y i , z i are ordered in pairs with n points q i = q ( x i , y i , z i ) of the test surface .
a linear transformation matrix r and a translation offset vector t aligning reference and test surface are directly estimated by minimization of the sum of the squared error : ( 1 ) er,t = sumi = 1npi - rqi - t2 - - - > min,which means that the ( geometric ) distance between the reference surface and the transformed test surface should be as small as possible .
when the correct correspondences are known a unique solution for r and t for given n = n point pairs or a solution in the least square sense for n > n directly yields .
when limiting to an affine transform , the linear transform matrix with n 2 parameters modifies to a rotation matrix with n rotation angles resulting in a 2n - dimensional optimization problem ( together with the n translation parameters ) .
such a nonlinear equation can generally only be solved iteratively or with a linearized approximation assuming small angles .
2.2.2 .
unknown point - to - point correspondences in general , without fiducial markers , no direct correspondence between points of the surfaces is given and also the number of points to be registered may be different .
in this situation , the transformation matrix cannot be determined immediately .
in icp algorithms , the closest point in the reference is considered as the corresponding point of the test surface iteratively adapting the transformation matrix in each iterative step .
sophisticated search strategies exist in order to avoid a complete search between the two surfaces .
the transformation in each iterative step does not align the two surfaces perfectly but brings them closer to each other in the converging case .
registration fails in the case of growing deviation between the two surfaces in the iterative steps .
when converging , the registration is terminated by a certain criterion such as size or gradient of the deviation error ; that is , a certain registration error generally remains for real measurement data .
icp algorithms perform a local search on the error surface describing the deviation of the actual measurement from the target and estimate translation and rotation matrices as registration parameter .
they converge well when a unique error minimum exists , but problems may arise when trapping in side minima occurs .
in the latter case , registration is inaccurate or fails completely .
reference [ 14 ] gives a good overview on icp algorithms for technical applications with three synthetically generated scenes providing test surfaces to evaluate the variants .
in this way the correct transform is known exactly .
icp algorithms can be divided into different phases .
according to [ 14 ] , typical icp algorithms perform the following steps .
( 1 ) selection of the source points ( measurement ) .
different criteria for handling point clouds are considered .
using the complete set of points to find the transformation parameters might be slow ; therefore the data could be randomly or regularly subsampled .
another strategy is to extract significant points at edges or corners where the information is concentrated .
this method of sampling requires preprocessing but it reduces the number of required points improving accuracy and efficiency of the algorithm .
( 2 ) matching .
this step is the most costly step in icp algorithm .
there are different methods such as building a kd - tree search to speed up finding corresponding closest points .
the simplest idea is finding the closest point in the other point cloud for each point .
the result of this method is generally stable but it computes slowly .
another method to find the correspondence is " shooting " along the normal of each point to the other point cloud .
the intersection of the normal and point cloud is considered as the corresponding point [ 14 ] .
there is a faster method to match the correspondence which is projection based matching .
in this method the points lying on the line of sight of one of the cameras are considered correspondent .
in this case the result is good if two cameras are close enough [ 14 ] .
( 3 ) weighting .
the matched point pairs can be weighted with regard to certain additional criteria describing the similarity of the corresponding region such as color , distance , curvature , or direction of tangent normal [ 14 ] .
to this end , the error metric is multiplied by a weighting factor depending on the specific criterion .
( 4 ) rejection .
rejection of certain point pairs can be implemented after each matching step in order to improve alignment .
this can be done in the phase of search for the closest neighbor .
several rejection methods have been proposed in different studies [ 14 ] : rejection of those point pairs with a distance greater than a user specified limit , rejection of a certain portion of point pairs with largest distance , and rejection of point pairs inconsistent with neighbor pairs ( rigid transform ) .
( 5 ) error metric and minimization .
this step is the last step of icp algorithm which measures the error between the point clouds and tries to minimize the distance between two point clouds .
mostly either a " point - to - point " or a " point - to - plane " error metric is applied .
in the first case , if p i is a source point and q i the corresponding point in the target point cloud and m is the transformation matrix , then the sum of squared distances has to be calculated and minimized [ 2 ] : ( 2 ) mmin = arg minm sumim.pi - qi2.closed form solutions for this kind of error metric exist , such as singular value decomposition ( svd ) , dual quaternions , quaternions , and orthonormal matrices .
accuracy and stability of these methods have been evaluated by [ 15 ] .
in general , point - to - plane error metric converges better than the point - to - point error metric [ 16 ] .
it minimizes the sum of squared distances between source points and the tangent plane at the target point which is orthogonal to the unit normal vector of that point .
mathematically , if p i is a source point and q i is the corresponding point in the target point cloud and n i = n ( x i , y i , z i ) is the normal vector at q i then the icp algorithm estimates the rigid transformation matrix by the minimizing function ( 3 ) mminnorm = arg minm summ.pi - qi.n2.because no closed form solutions for point - to - plane error metric exist it is usually solved iteratively by nonlinear methods such as levenberg - marquardt or it can be linearized considering some approximation for rotation matrix r , such as replacing sin theta by theta and cos theta by 1 .
the problem of the point - to - plane error metric is that it is sensitive to noise and that it does not converge well if the distance between two point clouds is large [ 15 , 17 ] .
the icp algorithm can vary by changing the methods in each step to improve the performance with regard to speed and stability depending on the amount of noise and outliers the algorithm can deal with .
2.3 .
selected icp algorithms for registration four different , under bsd license available , icp implementations in matlab have been compared with the proprietary software of alignrt for surface registration of phantoms .
we have chosen the same software platform because one criterion was the option to compare the speeds .
we assumed that the implementations belong to the most popular ones .
they all meet the same general ideas of icp registration and present the variety of unconstrained methods ( without markers or using colors ) .
we found that the four chosen icp algorithms are well suited to be compared with the method applied by alignrt .
an interesting extension of work would be to include new approaches to point registration such as described in [ 18 ] .
( 1 ) wilm 's algorithm [ 2 , 19 ] .
point clouds are aligned by considering the complete points set .
the program finds the nearest neighbor by a kd - tree search which considerably increases the speed of matching .
point - to - point or point - to - plane error metric can be selected by parameter setting .
alignrt uses a similar point - to - plane metric as follows from the communication with the manufacturer .
( 2 ) kroon 's [ 20 ] , modified .
this program uses a finite difference model to align the point clouds .
the finite difference method also supports the transform types of resizing and shearing .
several optimization functions are included for minimum search .
we added a global search approach by generating different start points using a scatter - search method to improve the results .
all starts points are evaluated and the points which are unlikely to improve the minimum are rejected .
( 3 ) renoald 's [ 21 ] .
it is a simple icp implementation which uses all the data points .
it first finds the corresponding points by creating a delaunay tessellation of points in a model to search for the closest point .
then it calculates the initial transformation matrix by singular value decomposition ( svd ) and applies this to the target point cloud .
the transformation matrix is updated iteratively until no more correspondences can be found .
( 4 ) bergstrom 's [ 22 , 23 ] .
it is similar to the renoald 's algorithm with the main difference that , after matching corresponding points , the point pairs are weighted by the maximum point distance .
levenberg - marquardt algorithm is directly applied to minimize the squared sum of the distances of closest points .
most of the implementations allow choosing among modes and modifying parameters .
the best configuration for this experimental setup has been investigated and shown in table 3 .
the above given references give further details .
2.4 .
related works reference [ 4 ] compared suggested setup correction with a second and independently operated marker - based optical system with an anthropomorphic plastic phantom and healthy volunteers .
they found alignment accuracies of about 1 mm for translation and 0.5degrees for rotation as an average .
using markers is more invasive and time consuming but in general safer than unconstrained registration .
extensive research has been done on the development of surface sensors .
the general ideas are shown in works as [ 12 , 13 ] .
reference [ 24 ] deals with the simulation of photogrammetric triangulation in order to develop the algorithms without need of acquisition of additional camera data .
reference [ 3 ] investigated the temporal stability of alignment accuracy in the context of respiratory motion in an operation mode where the sensor is triggered by the breathing phase .
a rigid , flesh - colored mannequin torso phantom has been used .
in this approach , the optical sensor is combined with an infrared - based marker system for gating the breathing state and a motorized mechanical stage .
measured surface data has been compared with surface extracted from ct as a reference .
high stability and errors in the submillimeter range and less than 1degrees have been reported .
additionally , the accuracy of recommended patient realignment has been evaluated for 54 random shifts of the treatment table .
in our investigations we focused our attention on the influence of different types of phantoms in order to learn how curvature influences the registration reliability .
reference [ 14 ] gives helpful results how existing icp algorithms converge for synthesized surfaces .
also different sampling strategies for selection of registration points have been considered .
but for clinical practice it is important to verify these theoretical results with the real situation for data of an existing optical sensor .
reference [ 7 ] evaluates a 3 - dimensional surface imaging system for guidance in dibh therapy .
setup data based on captured 3d surfaces by the same surface imaging system as we used was compared with setup data based on cone beam computed tomography ( cbct ) and evaluated with regression based methods .
it was found that in the context of breast cancer treatment 95 % of the deviations less than 0.4 cm detected by the optical sensor were less than 0.66 cm in the other mode of cbct .
a comparison of megavoltage cbct based registration and of alignrt based registration to its own particular reference is subjected to certain time constraints .
a ct scan itself as a possible reference and the local megavoltage cbct scan on the tomotherapy unit is usually a time - consuming procedure .
reference [ 6 ] reports on two commercial optical sensors ( surface imaging systems ) and compares them with the actual adjustments in patient positions made on the basis of megavoltage ct scans .
the deviations between the proposed correction of the optical sensor and the subjectively best alignment of an expert have been statistically evaluated .
tests have been performed on an alderson phantom and on patients at head / neck , pelvic , and chest regions .
it was found that the optical sensors can support patient positioning mainly at pelvic and chest regions because immobilization of the patient by special masks is not possible as in the case of head and neck region .
generally , the alignrt system is usable on nearly all possible patient regions .
some papers deal with clinical applications of optical sensors to different patient regions .
besides classical patient body region dependent applications , the frame - and mask - less cranial stereotactic radiosurgery is a new application field .
the comparison of breath induced surface movements with different registration modalities is subjected to different time constants of the acquisition devices .
the verification of dibh ( depth inspiration breath - hold ) techniques with optical systems , as the alignrt system , is a new emerging procedure in the clinical practice .
a feasibility study for the usability of the alignrt system to frame - and mask - less cranial stereotactic was presented by [ 8 ] .
the presented technique shows the potential of head mold and surface monitoring to use in stereotactic treatments .
the accuracy of the surface imaging motion tracking system during the stereotactic treatment was verified .
the results were additionally tested on the standard optical guidance platform technique ( kvct by varian ) .
work [ 9 ] describes a clinical analysis of fifty patients with the alignrt system in comparison to megavoltage portal imaging .
daily alignment with the 3d optical imaging system was found to be valuable for reducing setup errors in comparison to skin markers .
particularly the anterior - posterior alignment directions were with the optical system noticeably better .
the possible synchronization of a classical cbct system with the alignrt has been shown by [ 10 ] .
an image guided method for the synchronization of the x - ray projections is synchronized with optically sensed surface during using cbct without any further hardware requirements .
the proposed method can by generically applied to any configuration of the cbct and optical imaging systems and also be used for extracranial tumor tracking .
3. generation of test surface data in order to generate surface data we focused our work on rigid phantoms because we are mostly interested in pure accuracy of the sensor together with the icp algorithms in the ideal case .
the investigated icp algorithms do not treat shape variations which is a motivation for using solid phantoms instead of real cases .
the influence of motion of real human bodies , caused by respiration for instance , is considered by other papers ( e.g. , [ 10 , 11 ]) .
3.1 .
test phantoms because the contour characteristics of a surface is important for a safe registration , specially designed phantoms of different surface types have been investigated .
to this end , dedicated phantoms have been designed or selected with a size approximately covering the measurement volume of the optical sensor of about 0.1 m3 .
in this study , four different phantoms have been measured by the optical sensor in order to generate point clouds for the evaluation of the icp algorithms .
( i ) plane .
it is a simple plane horizontally placed on the treatment table .
the main idea is to check the accuracy of the optical sensor with regard to vertical shift of the treatment table ( z direction ) .
( ii ) 3plane .
it consists of two planes and an edge especially built to allow a unique matching with respect to all x - y - z space coordinates .
( iii ) bowl .
the bowl phantom is more curved than a plane , but ambiguities with regard to rotations must be expected .
( iv ) torso. by the torso of a mannequin , a shape typical for the human body has been simulated .
the curvature of the torso phantom is more ambiguous in the cranial - caudal ( y ) than in the dorsal - ventral transverse motion direction .
the phantoms have been coated by white painting or textile to produce a surface that can be well captured by the cameras of the optical sensor when illuminated by the speckle projector .
measured point clouds of these phantoms are shown in figure 2 .
as visible in figure 2 ( c ) , the measured surfaces contained some points of the background ( e.g. , of the treatment table ) .
such extra points obviously not originating from the phantoms have been manually removed for the data of all phantoms .
as an example , figures 2 ( c ) and 2 ( d ) show the bowl surface before and after removing the extra points , respectively .
3.2 .
test setup the above described icp algorithms have been tested with surface data of the selected phantoms ( figure 2 ) moved to well - defined positions .
first , the optical sensor alignrt has been calibrated according to the instructions of the manufacturer .
then the phantoms have been placed on the treatment table and a surface scan at the origin has been captured .
this surface scan at central ( zero ) position of the treatment table served as a reference to compare with surface scans at other positions .
to this end , the phantoms have been translationally shifted by the treatment table in the directions d = { x , y , z } by distances of s d = { 0.5,1.0 , +/ - 10.0,20.0 } ( mm ) .
for the plane , translation was only done in z direction ( d = z ) because tests confirm the obvious fact that a motion in x or y direction cannot be detected if the plane phantom is placed in parallel to the x - y - axes as we did .
figure 3 gives an example on how the operator sees the situation on the monitoring screen of alignrt .
it shows the estimated misalignment for translation and rotation in mm and degrees , respectively , by numbers with one - digit accuracy after the comma and by bars .
at setup , the therapists attempt to minimize the shifts ( by minimizing the length of the bars ) [ 11 ] .
the surface data is exported as object files and used for the registration by the other icp algorithms .
after an initial phase , real - time surface tracking is possible with the alignrt system .
alignrt system delivers sufficiently fast displacement estimation for most medical indications of about 10 frames per second .
acceptable speed relates mainly to the time needed for an initial alignment which should not exceed about a second in order to be acceptable in clinical routine .
therefore two requirements result with regard to the speed : the alignment time should not be much longer than a second because more cannot be accepted in clinical routine .
in case of dynamic tracking , the speed demands arise by the typical patient motion to avoid subsampling on the one hand and to ensure that shape variations between two time steps can be neglected for rigid registration .
in the ideal case , the registration should be faster than the surface sensor in order to avoid reduction of frame rate .
4. results and discussion rigid transform matrices ( translation and rotation ) for registration of the reference with the tested position have been estimated by the proposed icp algorithms and with alignrt .
the investigated implementations specify the resulting coordinate transform for registration by different versions of matrices for homogenous coordinates .
for direct comparison , these matrices have been transformed into a single representation for translation and rotation ( see [ 12 ]) .
translational shift values of registration s ^ d in direction d yield directly from the offset part of the transform matrices .
table 1 shows the results of registration together with the expected translation values s d. the translational registration error in direction d is then given by edtrans = sd - s ^ d. the total registered rotation is composed by a series of three rotations r = { roll , pitch , yaw } around x - , y - , and z - axes , respectively , in the directions according to figure 1 ( b ) , each quantified by the euler angles alpha ^ r ={ alpha ^ roll,alpha ^ pitch,alpha ^ yaw } .
the rotatory registration error is errot = alpha ^ r - alphar = alpha ^ r for alpha r = 0 because the measurement phantoms have not been rotated .
we assumed a maximally allowed absolute registration error of e d trans max = 1 mm for translation and of e d rot max = 0.5degrees for rotation which are quite tough values in radiotherapy and marked entries with | e d trans | > e d trans max or | e d trans | > e d rot max boldface .
other works set the allowable tolerance a bit higher ( e.g. , [ 8 ] to 1 mm / 1degrees and [ 11 ] to 3 mm / 3degrees ) , but working with rigid phantoms without motion motivates our stricter limits .
figure 4 shows as an example one of the best results of aligned surfaces with the reference surface for a shift of s d = 10 mm in direction d = z using the wilm approach .
the residuals have been estimated by triangulation of the surfaces and color - coded displaying the distances in z direction .
it becomes clear that although the translational and rotational parameters are within the limits this does not hold for all points of the surfaces .
there are problems especially at sloping surface parts , at edges , and at the stitching area of left and right optical sensors which explains the remaining deviations after applying the icp algorithm .
table 2 summarizes table 1 with regard to adhering the limits e d trans max and e d rot max .
as expected with the plane phantom placed in parallel to the xy plane a safe registration is only possible in z direction and fails in x and y direction for all icp algorithms .
for the other three phantoms 3plane , bowl , and torso , only the wilm algorithm registers safely for the translational parameters .
no algorithm has problems with the rotatory parameters for any phantom except wilm which interestingly fails for the torso phantom for pitch and yaw and alignrt for yaw of the bowl phantom .
table 3 compares some important properties and results of the four tested algorithms that have been applied to four different test objects ( phantoms ) differently shifted relative to an original position .
the algorithms use different methods to compute the rigid transformation matrix ( translation and rotation ) between two point clouds , as described in section 2.3 as the result of registration .
main operational principles of the algorithms are summarized ; their processing speed and accuracy give information on their suitability for registration of our selected phantoms .
main differences consist in the method for the closest point search , the weighting , the error metric , and the method for minimization .
only wilm uses kd - tree search which is much more efficient than full search .
only bergstrom applies distance - based weighting .
none of the open source algorithms includes rejection .
among the open source algorithms , only wilm uses point - to - plane metric whereas all other apply a point - to - point criterion .
the alignrt registration results look similar to the wilm implementation .
this supports the assumption that similar principles are used by this proprietary program .
the average processing time for each algorithm is also qualitatively given .
it varies between fastest processing ( which was about a few seconds ) and slowest processing ( which was about 3 minutes ) for the registration by the icp algorithm on a standard computer ( intel core i7 , 64 - bit windows ) in matlab .
a more detailed evaluation of processing speed is not given because we do not expect that the chosen algorithms are implemented in an optimal way .
this may be different for the commercial implementation of alignrt .
renoald performed best with regard to processing speed .
wilm and alignrt show acceptable speed in the same range .
kroon is slow and bergstrom is very slow in the investigated implementation and would not be acceptable in clinical routine .
for offline verification , speed plays a less important role as long as the registration takes only seconds of time .
therefore those implementations indicated by + or ++ can be considered acceptable in the intended application ( see section 3.2 ) .
in tracking applications , when even the registration is done online , the speed of the algorithms matters much more and the patient alignment can be verified and corrected on the fly by moving the treatment table or adapting the irradiation .
but in this case , the algorithm needs much less iterations because the position differences from time step to time step are much smaller compared to the first alignment in the static case .
in table 3 , an overall assessment of the expected registration error between expected shift and the translation calculated by the icp algorithms is given .
translation in x and y direction was omitted for the plane phantom because no registration was possible due to the missing structure in viewing field and therefore only the translation in the z direction is specified .
one observation from the experiments is that the distance of shift does not affect the registration accuracy much .
also the required time for convergence is not really affected , obviously because the algorithms adapt their step size according to the gradient .
much more important are the structure and curvature of the surfaces to be aligned. with an ambiguous surface the error surface has flat areas where icp algorithms are likely to stick in a local minimum .
registration fails in this case to align the surfaces [ 25 ] .
wilm 's implementation shows the best results among the studied icp algorithms for translational registration .
the reason for that is obviously the use of the point - to - plane error metric which is the main difference to the other algorithms all failing with the above specified accuracy demands .
interestingly , wilm fails with rotatory registration for the torso phantom .
possibly the normal parameter of the point - to - plane error metric has disadvantages in this case .
similar happens for the alignrt implementation , but for the bowl phantom .
5. conclusion in the paper , different unconstrained icp algorithms have been compared for real ( noisy ) data produced by an optical sensor as part of a tomotherapy hd system .
registration has to deal with mainly two difficulties : the deficiencies of the sensor ( noise ) and the ambiguities resulting from the shape of the measured object .
reference [ 3 ] found accuracies better than 1 mm and 0.5degrees for the used mannequin torso phantom with the proprietary registration software of the alignrt system .
we could show that such accuracies are only possible for well curved surfaces whereas gross errors may occur for registration of other not uniquely shaped surfaces and are not much effected by the chosen icp registration algorithm .
the results show that obviously standard icp algorithms only considering point cloud or surface data are too unreliable to serve as single verification tool of correct patient settlement. of course , large correction values calculated by icp registration give a clear hint that positioning is incorrect whereas the opposite case does not hold : as small value is no guarantee for correct alignment .
depending on the curvature of the actually captured surface parts , small icp registration correction values are estimated even with wrong positioning because the icp algorithm sticks in local minima .
the registration information in parallel to the main orientation of the surface is only helpful in the case of unique surface structure .
a safe registration useful for setup correction mostly yields perpendicular to the main orientation of the surface .
therefore , the result of icp registration can only support the expertise of the clinical personnel as an additional tool for the positioning of the patient with regard to the treatment machine .
to improve the probability of reaching a correct deviation minimum without fiducial markers other variants of icp algorithm including additional criteria such as colors , normals , and curvatures [ 25 ] may be applied .
the hardware of the optical sensor supports this because an additional camera for capturing texture data is included in each measurement unit .
but according to [ 3 ] , although calibrated together with the stereo cameras , it can be only used for virtually projecting texture data on the captured surfaces , but not to support registration .
particularly , uncertainties of the registration in x - y direction could be reduced by this information .
ongoing work is done on the estimation of confidence values of registration .
depending on curvatures characteristics of the treated regions an estimation of the reliability of a registration could be given .
also alternative registration approaches to surface registration , such as probabilistic methods [ 18 ] , seem promising to improve the results and worthy of further investigation .
competing interests the authors declare no conflict of interests .
authors' contributions gerald krell , nazila nezhad , and mathias walke carried out the experiments , measured and collected the data and analyzed the results , and wrote the manuscript .
ayoub al - hamadi and gunther gademann contributed to the experiments design and to the interpretation of results .
1 van dyk j. kron t. bauman g. battista j. j. tomotherapy : a ' revolution ' in radiation therapy physics in canada 2002 58 2 79 86 2 kjer h. m. wilm j. evaluation of surface registration algorithms for pet motion correction [ ph.d. thesis ] 2010 lyngby , denmark technical university of denmark , dtu , dk - 2800 kgs 3 bert c. metheany k. g. doppke k. chen g. t. y. a phantom evaluation of a stereo - vision surface imaging system for radiotherapy patient setup medical physics 2005 32 9 2753 2762 10.1118 / 1.1984263 16266088 4 schoffel p. j. harms w. sroka - perez g. schlegel w. karger c. p. accuracy of a commercial optical 3d surface imaging system for realignment of patients for radiotherapy of the thorax physics in medicine and biology 2007 52 13 3949 3963 10.1088 / 0031 - 9155 / 52 / 13 / 019 17664587 5 godin g. rioux m. baribeau r. three - dimensional registration using range and intensity information 2350 proceedings of the processing and analysis of 3d dataoctober 1994boston , mass , usa 279 290 proceedings of spie 10.1117 / 12.189139 6 wiencierz m. kruppa k. ludemann l. clinical validation of two surface imaging systems for patient positioning in percutaneous radiotherapy https :// arxiv.org / abs / 1602.03749 7 alderliesten t. sonke j .
- j. betgen a. accuracy evaluation of a 3 - dimensional surface imaging system for guidance in deep - inspiration breath - hold radiation therapy international journal of radiation oncology , biology , physics 2013 85 2 536 542 10.1016 / j.ijrobp.2012.04.004 8 cervino l. i. pawlicki t. lawson j. d. jiang s. b. frame - less and mask - less cranial stereotactic radiosurgery : a feasibility study physics in medicine and biology 2010 55 7 1863 1873 10.1088 / 0031 - 9155 / 55 / 7 / 005 2 - s2.0 - 77949704300 20224158 9 shah a. p. dvorak t. curry m. s. buchholz d. j. meeks s. l. clinical evaluation of interfractional variations for whole breast radiotherapy using 3 - dimensional surface practical radiation oncology 2013 3 1 16 25 10.1016 / j.prro.2012.03.002 24674259 10 fassi a. schaerer j. riboldi m. sarrut d. baroni g. an image - based method to synchronize cone - beam ct and optical surface tracking journal of applied clinical medical physics 2015 16 2 10.1120 / jacmp.v16i2.5152 11 wiant d. b. wentworth s. maurer j. m. vanderstraeten c. l. terrell j. a. sintay b. j. surface imaging - based analysis of intrafraction motion for breast radiotherapy patients journal of applied clinical medical physics 2014 15 6 , article 4957 12 luhmann t. close range photogrammetry for industrial applications isprs journal of photogrammetry and remote sensing 2010 65 6 558 569 10.1016 / j.isprsjprs.2010.06.003 13 tsai r. y. wolff l. b. shafer s. a. healey g. a versatile camera calibration technique for high - accuracy 3d machine vision metrology using off - the - shelf tv cameras and lenses radiometry 1992 burlington , mass , usa jones and bartlett 221 244 http :// dl.acm.org / citation.cfm ? id = 136913.136938 14 rusinkiewicz s. levoy m. efficient variants of the icp algorithm proceedings of the 3rd international conference on 3 - d digital imaging and modeling ( 3dim ' 01 ) june 2001quebec city , canada 145 152 10.1109 / im.2001.924423 2 - s2.0 - 84949236475 15 eggert d. w. lorusso a. fisher r. b. estimating 3 - d rigid body transformations : a comparison of four major algorithms machine vision and applications 1997 9 5 - 6 272 290 10.1007 / s001380050048 2 - s2.0 - 0030705773 16 low k .
- l. linear least - squares optimization for point - to - plane icp surface registration 2004 chapel hill , nc , usa chapel hill university of north carolina 17 mitra n. j. gelfand n. pottmann h. guibas l. registration of point cloud data from a geometric optimization perspective proceedings of the 2nd symposium on geometry processing ( sgp ' 04 ) july 2004nice , france 22 31 10.1145 / 1057432.1057435 2 - s2.0 - 77954510719 18 myronenko a. song x. point set registration : coherent point drift ieee transactions on pattern analysis and machine intelligence 2010 32 12 2262 2275 10.1109 / tpami.2010.46 20975122 19 iterative closest point - - file exchange - - matlab central , http :// www.mathworks.com / matlabcentral / fileexchange / 27804 - iterative - closest - point 20 finite iterative closest point - - file exchange - - matlab central , http :// www.mathworks.com / matlabcentral / fileexchange / 24301 - finite - iterative - closest - point 21 the simple gui program for point clouds registration - - file exchange - - matlab central , http :// www.mathworks.com / matlabcentral / fileexchange / 35019 - the - simple - gui - program - forpoint - clouds - registration 22 bergstrom p. edlund o. robust registration of point sets using iteratively reweighted least squares computational optimization and applications 2014 58 3 543 561 10.1007 / s10589 - 014 - 9643 - 2 23 iterative closest point method - - file exchange - - matlab central , http :// www.mathworks.com / matlabcentral / fileexchange / 12627 - iterative - closest - point - method 24 von enzberg s. lilienblum e. michaelis b. a physical simulation approach for active photogrammetric 3d measurement systems proceedings of the ieee instrumentation and measurement technology conference ( i2mtc ' 11 ) may 2011 1 5 10.1109 / imtc.2011.5944110 25 munch d. combes b. prima s. a modified icp algorithm for normal - guided surface registration 7623 proceedings of the progress in biomedical optics and imagingfebruary 2010san diego , calif , usaproceedings of spie 10.1117 / 12.844994 figure 1 optical sensor in radiotherapy .
figure 2 surfaces of selected phantoms captured by the optical sensor alginrt showing typical problems of real measurement data : ( a ) measurement noise and systematic errors ; ( c ) extra points not belonging to the object of interest ; ( b ) and ( e ) seam from fusing the two surfaces of left and right optical sensors .
figure 3 an example of the alignrt monitoring screen seen during measurement of the torso phantom and vertical shift of the treatment table s d ( z ) = 10 mm. the reference surface is shown in pink and the measured surface in green .
the suggested linear translations ( vertical , lateral , and longitudinal ) and rotations ( yaw , pitch , and roll ) are shown by numbers and colored bars on the left together with the rms value ( called magnitude mag ) .
the white graph is used to display a time series of the rms values ( not used in our experiment ) .
figure 4 residuals of surface pairs shifted by s d = 10 mm in direction d = z of the studied phantoms captured by the optical sensor alginrt and aligned by the wilm approach .
table 1 registered translations s ^ x , s ^ y , and s ^ z and rotations alpha ^ roll , alpha ^ pitch , and alpha ^ yaw from the investigated sample implementations of the icp algorithm for the tested phantoms plane , 3plane , bowl , and torso and treatment table shifts s d in different directions d = { x , y , z } .
translations with an absolute translational registration error | e d trans | > e d trans max = 1 mm and rotations with an absolute registration error e r rot > e d rot max = 0.5degrees are marked boldface .
phantom shift registration translation / mm rotation / degrees s d / mm d s ^ x s ^ y s ^ z alpha ^ roll alpha ^ pitch alpha ^ yaw wilm algorithm plane 0.5 z 0.4282 0.0087 0.5482 - 0.0001 - 0.0012 0.0000 1.0 z 1.4503 0.4656 1.0627 0.0000 - 0.0123 0.0000 10.0 z 0.4760 0.8346 10.0927 0.0002 - 0.0022 - 0.0005 20.0 z 0.0827 1.1255 20.0975 - 0.0001 0.0213 - 0.0007 3plane 0.5 z - 0.0100 0.1440 0.5325 - 0.0000 0.0001 - 0.0003 1.0 z - 0.0395 0.1362 1.0882 0.0001 0.0004 0.0001 10.0 z - 0.1475 0.1217 10.0550 0.0003 0.0001 - 0.0003 20.0 z - 0.0665 - 0.0903 20.9796 0.0005 0.0012 - 0.0006 10.0 y - 0.1237 9.9743 0.0157 0.0001 0.0004 0.0001 - 10.0 y - 0.1991 - 9.6955 0.1602 0.0002 - 0.0001 0.0004 10.0 x 9.8886 0.3100 0.1109 0.0013 - 0.0004 0.0001 bowl 0.5 z 0.0749 0.0702 0.4491 - 0.0006 0.0013 - 0.0000 1.0 z 0.0596 0.1477 0.9348 - 0.0010 - 0.0018 - 0.0011 10.0 z - 0.0084 0.0054 10.1927 0.0061 0.0121 0.0004 20.0 z 0.3618 0.0843 20.0056 0.0005 0.0382 - 0.0001 10.0 y - 0.1668 9.9264 0.1325 0.0035 - 0.0678 - 0.0033 - 10.0 y 0.0885 - 9.7892 - 0.3034 0.0004 0.0246 - 0.0006 10.0 x 9.9217 - 0.0522 0.0799 - 0.0014 - 0.0400 - 0.0024 - 10.0 x - 9.8553 0.1800 - 0.0533 - 0.0005 0.0854 - 0.0005 torso 0.5 z - 0.0239 - 0.0895 0.5171 0.0033 1.5783 - 1.5785 1.0 z - 0.0986 - 0.1490 1.0508 0.0022 1.6005 - 1.6007 10.0 z 0.0303 0.1723 9.9136 0.0090 1.1490 - 1.1480 20.0 z 0.0995 0.1012 19.8599 0.0017 0.8377 - 0.8362 10.0 y 0.1819 9.9194 - 0.1830 0.0009 0.9571 0.9572 - 10.0 y - 0.1553 - 9.5344 0.0316 0.0020 - 1.4725 1.4724 10.0 x 10.1230 - 0.0174 - 0.0374 0.0047 1.5300 - 1.5299 - 10.0 x - 9.8724 - 0.0488 - 0.0401 0.0034 - 1.6261 1.6263 kroon algorithm plane 0.5 z - 0.4031 - 0.1523 0.5499 - 0.0001 - 0.0001 - 0.000 1.0 z - 0.9254 - 0.2737 1.0675 0.0002 0.0005 - 0.0001 10.0 z 1.3403 1.2951 10.0872 0.0002 - 0.0015 - 0.0004 20.0 z - 3.7160 0.7362 20.0891 - 0.0001 0.0007 - 0.0008 3plane 0.5 z 0.0023 - 0.1280 0.3746 - 0.0005 0.0000 0.0000 1.0 z - 0.0470 - 0.2840 0.8252 - 0.0001 0.0003 0.0001 10.0 z - 1.5692 - 5.8559 7.3710 - 0.0125 - 0.0045 - 0.0043 20.0 z 1.0803 - 4.9535 18.1806 1.0803 0.0014 - 0.0021 10.0 y 0.0793 6.5978 - 1.3214 - 0.0066 - 0.0004 - 0.0003 - 10.0 y - 0.1597 - 6.6084 - 1.3826 0.0062 0.0004 0.0006 10.0 x 0.7600 - 0.0439 0.0272 0.0002 0.0008 - 0.0018 bowl 0.5 z 0.0818 - 0.0440 0.2600 0.0009 0.0004 - 0.0004 1.0 z 0.0572 - 0.0864 0.5162 0.0015 0.0002 - 0.0004 10.0 z - 1.4703 - 0.2302 8.9576 0.0087 0.0022 - 0.0420 20.0 z - 1.2950 - 0.1217 19.0383 0.00206 0.0035 - 0.0554 10.0 y - 0.2905 8.8071 0.0682 0.0369 - 0.0581 - 0.0027 - 10.0 y 0.2614 - 8.6043 0.3671 - 0.0368 0.0533 0.0006 10.0 x 9.4381 - 0.4111 0.0864 0.0023 0.0202 - 0.0048 - 10.0 x - 9.1155 0.5139 0.1217 0.0004 - 0.0187 0.0473 torso 0.5 z 0.3474 1.4598 0.1776 - 0.0003 0.0003 - 0.0128 1.0 z 0.3474 1.5383 0.0214 - 0.0012 0.0013 - 0.0214 10.0 z 0.0014 0.2854 10.4856 0.0004 0.0018 - 0.0006 20.0 z 0.2456 0.8967 20.8858 0.0016 0.0010 - 0.0012 10.0 y 0.1391 0.8154 0.5305 0.0032 - 0.0002 - 0.0007 - 10.0 y 0.0276 - 0.7041 - 0.3240 - 0.0025 0.0002 - 0.0003 10.0 x 10.7852 0.6038 0.0172 0.0002 0.0026 - 0.0353 - 10.0 x - 10.6538 - 1.5451 0.2848 0.0005 - 0.0080 0.0327 renoald algorithm plane 0.5 z - 0.3951 - 0.1486 0.5499 - 0.0001 - 0.0001 - 0.0000 1.0 z - 0.8802 - 0.2661 1.0675 0.0000 0.0006 - 0.0001 10.0 z 1.2549 1.1879 10.0882 0.0002 - 0.0010 - 0.0005 20.0 z - 2.0547 - 0.4494 20.0903 - 0.0001 - 0.0040 - 0.0006 3plane 0.5 z 0.0041 - 0.1311 0.3722 - 0.0005 0.0000 0.0000 1.0 z - 0.0469 - 0.2864 0.8242 - 0.0006 0.0003 0.0001 10.0 z - 0.0744 - 4.5305 8.2095 - 0.0099 - 0.0003 - 0.0039 20.0 z 0.9315 - 6.7487 16.8058 - 0.0134 0.0058 0.0033 10.0 y 0.1794 4.0410 - 1.1857 - 0.0124 - 0.0004 - 0.0002 - 10.0 y - 0.2608 - 5.4906 1.3925 0.0088 0.0009 0.0005 10.0 x 0.7315 - 0.0448 0.0321 0.0002 0.0009 - 0.0018 bowl 0.5 z 0.0818 - 0.0440 0.2600 0.0009 0.0004 - 0.0004 1.0 z 0.0571 - 0.0831 0.5143 0.0015 0.0003 - 0.0004 10.0 z - 1.2139 - 0.1348 8.8075 0.0069 0.0014 - 0.0393 20.0 z - 1.5751 - 0.1130 18.7352 0.0056 0.0045 - 0.0556 10.0 y - 0.4060 7.5070 - 0.0636 0.0356 - 0.0402 - 0.0014 - 10.0 y 0.3518 - 8.5498 0.2583 - 0.0358 0.0521 0.0009 10.0 x 8.8252 - 0.2963 - 0.1059 - 0.0000 0.0147 - 0.0470 - 10.0 x - 8.9940 0.4230 0.1382 0.0007 - 0.0171 0.0477 torso 0.5 z 0.2920 0.4220 0.7578 0.0005 0.0012 - 0.0321 1.0 z 0.2378 0.4817 1.0779 0.0003 0.0009 - 0.0315 10.0 z - 0.0037 0.2426 10.4506 0.0001 0.0018 - 0.0006 20.0 z 0.3008 - 0.1655 18.7455 - 0.0011 0.0022 - 0.0001 10.0 y 0.1177 0.7804 0.4367 0.0028 - 0.0002 - 0.0004 - 10.0 y 0.0045 - 0.6522 - 0.2843 - 0.0022 0.0001 - 0.0001 10.0 x 10.4139 0.4050 0.0860 0.0004 0.0015 - 0.0327 - 10.0 x - 10.4768 - 0.6117 0.1427 - 0.0003 - 0.0019 0.0334 bergstrom algorithm plane 0.5 z 0.0818 - 0.0440 0.2600 0.0009 0.0004 - 0.0003 1.0 z - 0.9302 - 0.2768 1.0675 0.0000 0.0005 - 0.0001 10.0 z - 4.8742 - 0.3023 10.0866 0.0002 0.0013 - 0.0008 20.0 z - 3.7203 0.7381 20.0894 - 0.0000 0.0001 - 0.0008 3plane 0.5 z 0.0023 - 0.12880 0.3746 - 0.0005 0.0003 0.0000 1.0 z - 0.0470 - 0.2840 - 0.8252 - 0.0060 0.0003 0.0001 10.0 z - 8.9059 4.1357 11.6053 0.0083 - 0.0080 - 0.0024 20.0 z 1.0816 - 4.9472 18.1816 - 0.0095 0.0014 - 0.0021 10.0 y - 2.1412 13.7773 1.6485 0.0079 0.0060 0.0009 - 10.0 y - 0.1596 - 6.6095 1.3820 0.0062 0.0004 0.0006 10.0 x 8.4082 2.8181 1.2289 0.0064 - 0.0053 - 0.0034 bowl 0.5 z 0.0818 - 0.0440 0.2600 0.0009 0.0004 - 0.0004 1.0 z 0.0527 - 0.0803 0.5211 0.0016 0.0003 - 0.0004 10.0 z - 0.1868 - 0.0644 10.2913 - 0.0002 - 0.1752 0.0064 20.0 z 0.6199 - 0.0374 20.2321 0.0092 - 0.1716 0.0172 10.0 y 0.0319 10.0246 - 0.4303 0.0058 - 0.1689 0.0073 - 10.0 y 0.4347 - 9.4345 0.9152 - 0.0312 - 0.1553 0.0238 10.0 x 9.9406 - 2.1170 0.6590 0.0190 0.0004 0.0001 - 10.0 x - 10.3737 - 1.6094 0.3040 0.0133 0.0020 - 0.0003 torso 0.5 z 0.3383 - 2.5946 0.8076 0.0004 0.0001 - 0.0128 1.0 z 0.1906 - 2.6231 0.9682 - 0.0000 0.0000 - 0.0121 10.0 z 0.0014 0.2854 10.4856 0.0040 0.0018 - 0.0006 20.0 z - 0.4539 - 0.3521 19.4238 0.0008 0.0023 0.0150 10.0 y 0.5342 8.9866 0.3959 0.0007 - 0.0020 - 0.0169 - 10.0 y - 0.1569 - 8.6553 1.2477 - 0.0070 0.0020 0.0012 10.0 x 10.4504 - 2.5372 0.4949 0.0003 0.0003 - 0.0131 - 10.0 x - 10.2027 2.5363 0.3930 - 0.0003 - 0.0002 0.0120 alignrt algorithm plane 0.5 z 0.1 0.3 0.0 0.0 0.0 0.0 1.0 z 0.2 0.1 0.5 0.0 0.0 0.1 10.0 z 0.3 0.0 10.1 0.0 0.0 0.1 20.0 z 0.2 1.2 20.1 0.0 0.0 0.2 3plane 0.5 z 0.0 0.1 0.5 0.0 0.0 0.0 1.0 z 0.1 0.1 1.1 0.0 0.0 0.0 10.0 z 0.0 0.2 10.2 0.0 0.0 0.0 20.0 z 0.0 0.1 20.1 0.0 0.0 0.1 10.0 y 0.2 10.2 0.2 0.0 0.0 0.0 - 10.0 y 0.1 - 9.8 0.1 0.0 0.0 0.0 10.0 x 9.8 0.2 0.1 0.0 0.0 0.0 bowl 0.5 z 0.1 0.1 0.5 0.0 0.0 0.0 1.0 z 0.1 0.2 1.1 0.0 0.0 0.0 10.0 z 0.1 0.2 10.0 0.1 0.0 1.2 20.0 z 0.3 0.3 19.9 0.1 0.0 1.6 10.0 y 0.2 10.3 0.2 0.0 0.1 1.6 - 10.0 y 0.7 - 9.8 0.2 0.1 0.1 2.7 10.0 x 10.1 0.2 0.2 0.0 0.1 0.1 - 10.0 x - 10.0 0.5 0.2 0.0 0.0 1.7 torso 0.5 z 0.1 0.0 0.6 0.0 0.0 0.0 1.0 z 0.1 0.0 1.1 0.0 0.0 0.0 10.0 z 0.1 0.0 9.9 0.1 0.0 0.1 20.0 z 0.2 0.1 19.8 0.0 0.1 0.1 10.0 y 0.2 10.1 0.2 0.0 0.0 0.0 - 10.0 y 0.2 - 9.8 0.1 0.1 0.0 0.0 10.0 x 10.0 0.2 0.1 0.0 0.0 0.0 - 10.0 x - 9.9 0.1 0.0 0.0 0.0 0.0 table 2 summary of registration success and fail for translations ( x , y , z ) and rotation ( rot ) ; + denotes success when the specified misalignment threshold is deceeded and , otherwise , labels the failing when the threshold is exceeded .
algorithm wilm kroon renoald bergstrom alignrt motion x y z rot x y z rot x y z rot x y z rot x y z rot phantom plane - - + + - - + + - - + + - - + + + - + + 3plane + + + + - - - + - - - + - - - + + + + + bowl + + + + - - - + - - - + + - + + + + + - torso + + + - + - + + + - + + + - + + + + + + + : | e d trans | < e d trans max and | e r rot | < e d rot max ; - : | e d trans | > e d trans max and | e r rot | > e d rot max .
table 3 overall assessment of the tested icp algorithms .
property algorithm wilm kroon renoald bergstrom alignrt closest point search kd - tree full full full - - a weighting none none none distance - based - - a rejection none none none none - - a error metric point - to - plane point - to - point point - to - point point - to - point point - to - plane minimization linearization of rotation matrix global search svd levenberg - marquardt - - a speedb + - ++ - - + max .
| e r rot | < 1.0 mm > 1.0 mm > 1.0 mm > 1.0 mm < 1.0 mm max .
| e d trans | > 0.5degrees < 0.5degrees < 0.5degrees < 0.5degrees > 0.5degrees aunknown .
b ++ : very fast ; + : fast ; - : slow ; - - : very slow .