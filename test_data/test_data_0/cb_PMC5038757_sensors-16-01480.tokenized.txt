sensors ( basel ) sensors ( basel ) sensors sensors ( basel , switzerland ) 1424 - 8220 mdpi 27649173 5038757 10.3390 / s16091480 sensors - 16 - 01480 article a precise visual method for narrow butt detection in specular reflection workpiece welding zeng jinle chang baohua du dong * hong yuxiang chang shuhe zou yirong passaro vittorio m. n. academic editor key laboratory for advanced materials processing technology , ministry of education , department of mechanial engineering , tsinghua university , beijing 100084 , china ; zengjl12 @ mails.tsinghua.edu.cn ( j.z. ) ; bhchang @ tsinghua.edu.cn ( b.c. ) ; hongyuxiang @ tsinghua.edu.cn ( y.h. ) ; changsh15 @ mails.tsinghua.edu.cn ( s.c. ) ; zouyr @ tsinghua - tj.org ( y.z . )
* correspondence : dudong @ tsinghua.edu.cn ; tel. : + 86 - 10 - 6278 - 3387 13 9 2016 9 2016 16 9 1480 21 7 2016 07 9 2016 ( c ) 2016 by the authors ; licensee mdpi , basel , switzerland .
2016 this article is an open access article distributed under the terms and conditions of the creative commons attribution ( cc - by ) license ( http :// creativecommons.org / licenses / by / 4.0 /) .
during the complex path workpiece welding , it is important to keep the welding torch aligned with the groove center using a visual seam detection method , so that the deviation between the torch and the groove can be corrected automatically .
however , when detecting the narrow butt of a specular reflection workpiece , the existing methods may fail because of the extremely small groove width and the poor imaging quality .
this paper proposes a novel detection method to solve these issues .
we design a uniform surface light source to get high signal - to - noise ratio images against the specular reflection effect , and a double - line laser light source is used to obtain the workpiece surface equation relative to the torch .
two light sources are switched on alternately and the camera is synchronized to capture images when each light is on ; then the position and pose between the torch and the groove can be obtained nearly at the same time .
experimental results show that our method can detect the groove effectively and efficiently during the welding process .
the image resolution is 12.5 mum and the processing time is less than 10 ms per frame .
this indicates our method can be applied to real - time narrow butt detection during high - speed welding process .
welding process control seam tracking specular reflection workpiece welding narrow butt visual detection 1 .
introduction during complex path welding , the welding torch must be aligned with the groove center to achieve good welding quality .
it is necessary to control the motion path of the torch or the workpiece in real time during the whole welding process .
currently , the " teaching - playback " and offline programming techniques are widely used in robotic welding .
the welding path is recorded beforehand and then the robots can move along the recorded path during welding .
however , in the actual welding conditions , the machining errors , assembly errors and thermal deformation will lead to a deviation between the actual and the recorded welding paths .
therefore , it is critical to develop automatic seam detection technologies to recognize the position of the actual welding path .
thus , the deviation between the torch and the workpiece can be corrected automatically [ 1 ] .
the visual detection method is the most promising seam recognition technology , due to its abundant information , non - contact with workpiece , high precision and good sensitivity [ 2,3,4 ] .
however , there are serious challenges when detecting the seam of the aerospace components [ 5,6,7 ] : specular reflection surface of the workpiece .
the components are usually made of aluminum alloy , titanium alloy and stainless steel , which may strongly reflect the incident light .
for example , the reflectance of aluminum to visible light can be over 95 % [ 8 ] .
the strong specular reflection effect will lead to the non - uniform grayscale distribution in the images , lowering the signal - to - noise ratio ( snr ) of imaging .
small width of the narrow butt joint .
the workpieces to be welded are mounted close to each other , which is called the " narrow butt " .
the width of the butt joint is significantly small ( smaller than 0.2 mm ) , which requires a precise detection method .
small welding region .
the components are usually joined by gas tungsten arc welding ( gtaw ) , friction stir welding or high energy beam welding ( such as laser , electron beam and plasma arc welding ) methods .
the welding region is usually small , so that the welding quality would greatly deteriorate even though there is a small deviation between the torch and the welding path .
high welding speed .
the welding speed can reach 3 m / min or higher in high energy beam welding , which requires a real - time detection method .
it is essential to get high snr images and develop efficient image processing algorithm in order to meet the real - time detection needs .
nowadays , the structured light detection method is the most widely used in the industry [ 9,10,11 ] .
there have been lots of commercial structured light sensors developed by meta vision , servo robot , etc .
[ 12,13,14 ] .
in this method , a laser stripe is projected onto the groove and its distortion mirrors the geometric differences between the groove and the base metal [ 15,16,17,18,19,20,21 ] .
this method is suitable when there are significant geometric differences between the groove and the base metal as shown in figure 1 .
however , as shown in figure 2 , when detecting narrow gaps such as 0.2 mm , the laser line distortion may not be significant enough .
moreover , the width of the laser stripe would become thick due to the specular reflection effects , lowering the detection accuracy .
therefore , the structured light method is not applicable in narrow butt detection .
to overcome the existing problems in structured light detection methods , researchers have proposed many other visual methods to achieve narrow butt detection .
huang projected a line laser stripe onto the workpiece surface and captured the images of the laser speckles [ 22 ] .
the discontinuity of the speckles indicates the region of the groove .
zheng projected a circular laser spot onto the workpiece surface [ 23 ] .
the continuous dark curve in the image indicates the position of the groove and at the same time , the position and pose between the torch and the workpiece can be calculated according to the dimensional change and shape distortion of the spot .
chen , ma , and shen proposed several novel narrow butt detection methods [ 24,25,26 ] .
the differences between the groove and the base metal are highlighted in arc or led lighting conditions .
however , although some active lighting methods are proposed in these studies , there is still a lack of solutions for the specular reflection effect ; the signal - to - noise ratio of the images captured in the previous researches is pretty low [ 22,23,24,25,26 ] .
the grayscale distribution of the laser speckles or the workpiece surface is not uniform [ 24,25,26 ] ; there are several highlighted regions caused by specular reflection effects while the grayscales in other regions are lower [ 23 ] .
the grayscale differences between the groove and the base metal are not so distinct and the groove region is significantly polluted by noise .
the poor imaging quality might affect the subsequent image processing algorithm , which is not helpful for an accurate and real - time detection of the narrow butt joint .
furthermore , most of the existing methods can only obtain the transversal offset of the groove , but the information of 3d offsets and the pose between the torch and the workpiece is very important in complex path welding .
therefore , these existing methods might not be applicable to narrow butt detection in specular workpiece welding .
in this paper , we propose a precise and effective visual narrow butt detection method in specular reflection workpiece welding .
we will study the in - depth visual sensing method of specular reflection surface and propose a detection method to obtain the 3d offsets and pose between the torch and the workpiece .
first , based on the reflection characteristics of the workpiece , a uniform surface light source was designed to construct the uniform lighting condition , in order to get high snr images against the adverse effects of specular reflection .
the grayscale differences between the groove and the base metal were greatly highlighted , which was beneficial to an accurate detection of the groove .
then , a double - line laser stripe was projected onto the workpiece to obtain the equation of the workpiece surface in the camera coordinate system .
considering the transformation matrix between the camera and torch coordinate systems , the position and pose of the workpiece relative to the torch were calculated .
afterwards , a visual detection sensor was developed and a " shutter - synchronized dual light stroboscopic " trigger method was used to obtain two kinds of information nearly simultaneously when each light source is on. finally , welding experiments were carried out to verify the applicability of our method .
the rest of the paper is organized as follows : section 2 will illustrate the principles of our visual sensing method against specular reflection effects .
the corresponding image processing algorithm will be proposed to detect the pixel coordinates of the narrow butt .
section 3 will introduce a method to detect the position and pose between the torch and the workpiece .
a double - line laser stripe is used to detect the workpiece equation relative to the welding torch .
combining the research results above , we will develop a visual sensor of narrow butt detection in section 4 .
in section 5 , welding experiments were conducted and the sensor was used to detect the narrow butt in real time .
finally , conclusions are given in section 6 .
2. visual detection method of narrow butt of specular reflection workpiece 2.1 .
principles of the narrow butt visual sensing method of specular reflection workpieces figure 3 shows the reflection characteristic differences between the groove and the base metal regions .
on one hand , when the uniform light is projected onto the base metal , the incident light is reflected and almost returns along the specular reflection axis because of the strong specular reflection effect .
the light intensity near the specular reflection axis is much greater than other directions .
on the other hand , the light projected onto the groove cannot return due to the gap of the narrow butt joint .
therefore , the intensity of the reflected light in the groove region is relatively lower .
as a result , the proposed visual sensing method must meet the following needs to achieve an effective detection : first , a uniform lighting condition must be constructed and thus we can obtain the images with uniform grayscale distribution , overcoming the adverse effects of specular reflection ; and second , the camera must be mounted near the specular reflection axis , by which the grayscale differences between the groove and the base metal can be highlighted to the utmost extent .
figure 4 shows the typical spectrum of the arc light during aluminum alloy welding using the gtaw method .
the spectrum was obtained by a usb2000 spectrometer .
the intensity of the arc light is relatively low in the range of 610 nm to 690 nm. in order to eliminate the interference from the arc , the wavelength of the active light source we will design should be within this range .
in this paper , we design a uniform surface light source ( usls ) by analytic optical simulation and verify its lighting effect by experiments .
the designed usls is shown in figure 5 of which the central wavelength is 630 nm and maximum power is 6 w. it is composed of an led array with 20 leds , a diffuse shell , a top aperture , and a bottom aperture .
the dimensions of the top and bottom apertures are 10 mm x 10 mm and 20 mm x 20 mm , respectively .
the diffuse shell is designed to reflect the light emitted from the led array to construct a uniform lighting condition .
the bottom and side surface of the diffuse shell are covered with high reflection coatings .
the light emitted from the led array is reflected many times by the coated surface and then projected onto the workpiece surface ; then the reflected light from the workpiece surface travels through the bottom and top aperture in succession and is finally captured by the camera as shown in figure 5e .
in order to evaluate the illumination effect of the usls , we used tracepro to calculate the luminous flux distribution emitted from the top aperture as shown in figure 6 .
tracepro is an optical simulation software , which can calculate the luminous flux distribution on the surfaces using ray tracing algorithm .
the distance between the usls and the workpiece surface was set to be 30 mm , 40 mm , and 50 mm , respectively .
then we calculated the luminous flux distribution in a 16 mm x 16 mm region which is 0.5 mm above the top aperture .
the bidirectional reflection distribution function ( brdf ) data of aluminum from merl brdf database [ 8 ] is applied as the reflection characteristic of the workpiece during the simulation process .
these data are fitted by the abg brdf model beforehand as shown in figure 7 , which is regarded as an input parameter in the simulation .
the fitted model of aluminum is : ( 1 ) brdf = 3.3x10 - 32.08x10 - 5 +|| beta - beta0 || 2 where beta and beta0 are the projected vectors of unit vectors along specular reflection axis and observation direction respectively .
in addition , we also set the workpiece as a perfect diffuser to evaluate the adaptability of our sensing method .
the simulation results are shown in figure 8 .
the simulation results are similar whether the reflection characteristic of the workpiece meets equation ( 1 ) or the workpiece is a perfect diffuser .
in addition , the luminous flux distribution is nearly independent of the distance between the usls and the workpiece surface when it varies from 30 mm to 50 mm. in the region - 4 mm <= x <= 4 mm and - 4 mm <= y <= 4 mm ( about 64 % of the top aperture area ) , the luminous flux of each point is greater than 900 w / m2 and the distribution is quite uniform .
the light emitted from the top aperture will be captured by the camera , which indicates that the grayscale distribution of the images would be uniform too .
it can be seen that our proposed sensing method is effective to construct the uniform lighting condition , which can eliminate the grayscale inhomogeneity in the images due to the specular reflection effect .
figure 9 shows the actual images captured by the camera using our method .
the workpieces are all aluminum alloy whose surface roughness varies from 12.5 mum to 0.8 mum .
regardless of how the surface roughness varies , the grayscale in the base metal region is nearly saturated due to the strong specular reflection effect , while the grayscale in the groove region is nearly zero .
we use the separation degree defined in equation ( 2 ) to evaluate the grayscale differences between the base metal and the groove region : ( 2 ) j =| mu1 - mu2 | sigma12 + sigma22 where mu1 and mu2 are the average grayscales of the base metal and the groove region ; sigma1 and sigma2 are the standard deviation of the grayscales in the base metal and the groove region .
the calculation results of each image in figure 9 is shown in table 1 .
the separation degree is over 1.97 in our method .
the grayscale differences between these two regions are greatly highlighted , which is helpful for an efficient and accurate detection and consequently improves the time complexity of the image processing procedure .
2.2 .
image processing algorithm of narrow butt detection based on the images captured by our sensing method , we propose a narrow butt detection algorithm as shown in figure 10 .
the image processing algorithm was written in c ++ and opencv library .
denote the current captured image as i1 ( x,y ) .
the steps of the algorithm are as follows : region of interest ( roi ) setting .
if the image i1 ( x,y ) is the first one , set the whole image as roi .
otherwise , the center of the roi is located in the previously detected position of the groove ; the width and the height of the selected roi are all half of those of the whole image .
denote the roi as r1 ( x,y ) .
canny operation .
apply the canny operator to r1 ( x,y ) and a binary image b1 ( x,y ) can be obtained containing the two - sided edges of the groove .
morphological closing operation .
the continuous groove region would become broken after the edge extraction process by the canny operator .
the morphological closing operation is used to repair the broken edges and fill the blank region between two edges of the groove as well .
the image after morphological closing operation is denoted as c1 ( x,y ) .
connected domain extraction and thresholding based on domain area .
the flood - fill algorithm is used to extract each connected domain of the image c1 ( x,y ) .
then thresholding is used to eliminate the isolated connected domains with small areas .
in this paper , at most five connected domains with maximum areas are left .
find the domain with minimum area - to - perimeter ratio ( apr ) as the groove .
in the groove region , the apr is about half of the groove width , which is usually small .
in other regions with large areas , we can assume that these regions can be regarded as circles approximately .
therefore , the aprs of these regions are about a quarter of the width of themselves , which are usually much larger than half of the groove width .
calculate the apr of each connected domain and the minimum one indicates the groove region most probably .
calculate the groove center .
scan each row or column of the groove region and we can finally obtain the trace of the groove center .
figure 11 shows the processing result of each step .
in figure 11d , there are two connected domains left after thresholding : the real groove region and a noise region on the upper right corner .
the area of the noise region is larger than the groove so that it cannot be eliminated by thresholding based on domain area .
after domain selection with minimum area - to - perimeter ratio , the real groove region can be found effectively .
3. position and pose detection between the welding torch and the workpiece surface the usls we designed in section 2 is used to generate the uniform lighting condition and detect the position of the groove in pixels , but it cannot detect the position and pose between the welding torch and the workpiece surface .
as the transformation matrix between the camera and the torch coordinate systems can be determined by hand - eye calibration method , we only need to detect the equation of the workpiece surface in the camera coordinate system during welding .
in this section , we will propose a double - line laser method to determine the equation of the workpiece surface .
figure 12 shows the principle of the double - line laser method .
a cross line laser stripe is projected onto the workpiece surface and the camera captures the grayscale images of the laser stripe .
the intrinsic parameters of the camera and the equations of the laser light planes in the camera coordinate system { c } can be predetermined after calibration .
these parameters can be used to calculate the 3d coordinate of each spot on the laser stripe .
therefore , the equation of the workpiece surface is determined in the camera coordinate system { c } .
in the camera coordinate system { c } , suppose that the two light planes of the cross line laser are : ( 3 ) n1tx = c1 and : ( 4 ) n2tx = c2 respectively , where n1 and n2 are the unit normal vectors of the light planes , and c1 and c2 are the directed distances between the origin of { c } and the light planes .
the parameters n1 , n2 , c1 , and c2 can be predetermined using the zhang 's calibration method [ 27 ] .
let us denote the pixel coordinates of the laser spot on each laser stripe as x1i and x2j respectively .
according to the pinhole model of the camera , the 3d coordinate of x1i in { c } meets : ( 5 ) x1i = z1i.s ( x1i ) where z1i is an unknown parameter ; s ( x1i ) is a 3d vector related to the intrinsic parameters of the camera .
combining equations ( 3 ) and ( 5 ) , we can determine the 3d coordinate of x1i by : ( 6 ) x1i = c1n1ts ( x1i ). s ( x1i ) similarly , the 3d coordinate of x2j can be expressed as : ( 7 ) x2j = c2n2ts ( x2j ). s ( x2j ) using equations ( 6 ) and ( 7 ) , we can obtain the 3d coordinates of all of the laser spots on the stripes .
denote them as g1 , g2 , ... , and gn respectively .
assuming that the workpiece surface is a flat plane approximately , the equation of the plane can be determined by the coordinates g1 , g2 , ... , and gn. suppose that the equation of the workpiece surface is : ( 8 ) ntx = c where n is the unit normal vector of the surface , and c is the directed distance between the origin of { c } and the workpiece .
since the laser spots are all located on the workpiece surface , there is : ( 9 ) ntgi = c , i = 1,2 ,... , n the unknown parameter n and c can be solved by optimizating the following problem : ( 10 ) { minn,cf ( n,c )= minn,c1nsumi = 1n | ntgi - c | 2s.t .
|| n ||= 1 the lagrange multiplier method is applied to solving equation ( 10 ) : ( 11 ) g ( n,c )= f ( n,c )+ lambda ( 1 - ntn )= 1nsumi = 1n | ntgi - c | 2 + lambda ( 1 - ntn ) calculate the partial derivatives of equation ( 11 ) and set them to be zero : ( 12 ) { dg ( n,c ) dn = 2 [ 1nsumi = 1n ( gigitn - cgi ) - lambdan ]= 0dg ( n,c ) dc = 2nsumi = 1n ( c - gitn )= 0 the solution to equation ( 12 ) is ( 13 ) { omega.n = lambda.nc = ntg where ( 14 ) { omega = 1nsumi = 1n ( gi - g )( gi - g ) tg = 1nsumi = 1ngi combining equations ( 10 ) , ( 13 ) and ( 14 ) , we can get : ( 15 ) f ( n,c )= lambda according to equations ( 13 ) and ( 15 ) , it can be inferred that the optimization problem in equation ( 10 ) will be solved when n is the eigenvector of covariance matrix omega corresponding to the minimum eigenvalue lambdamin .
the unit normal vector n of the workpiece surface can be determined by equation ( 13 ) and c can be also calculated by equation ( 13 ) once n is determined .
considering omega is a real symmetric matrix , the eigenvector n can be calculated by the jacobi eigenvalue algorithm .
let us denote the pixel coordinate of the groove center detected in section 2 as gamma .
considering that the groove center is also located on the workpiece surface , the 3d coordinate of the groove center can be determined by : ( 16 ) gamma = cnts ( gamma ) s ( gamma ) figure 13 shows the actual laser stripe image captured by the camera .
we propose a corresponding processing algorithm to calculate the workpiece equation .
the flow of the processing algorithm is shown in figure 14 .
the laser stripes are extracted by hough transformation first .
then the equation of the workpiece surface is determined by equations ( 3 ) to ( 15 ) , and the 3d coordinate of the groove center is determined by equation ( 16 ) .
4. establishment of the narrow butt detection sensor 4.1 .
configuration of the narrow butt detection sensor based on the research results above , we developed a narrow butt detection sensor as shown in figure 15 .
it comprises a gigabit ethernet ( gige ) camera , a usls designed in section 2 , a laser light source ( lls ) , and a bandwidth filter .
the gige camera is an aca1600 - 60 gm ( basler , ahrensburg , germany ) with 60 fps maximum frame rate and 1600 x 1200 pixels .
the lls emits cross line stripe with 20 mw power and 635 nm wavelength .
the bandwidth filter is used to eliminate the interference from the arc and ambient light during welding .
the central wavelength and full width at half maximum ( fwhm ) of the bandwidth filter are 635 nm and 10 nm , respectively .
the usls is designed to detect the pixel coordinates of the narrow butt , and the lls is designed to detect the relative position and pose between the torch and the workpiece surface .
4.2 .
the " shutter - synchronized dual light stroboscopic " method in order to obtain two kinds of visual information from the usls and the lls , we propose a " shutter - synchronize dual light stroboscopic " method to synchronize the camera and the two light sources .
the usls and lls are switched on alternately and meanwhile , the camera is synchronized to capture images when each light source is on. in this paper , a ttl signal is used to trigger the usls and the lls .
the trigger signal is generated from the digital output port of the camera .
at the end of each exposure , the signal of the digital output port is inverted automatically by software as shown in figure 16 .
since the rising and falling edge of the trigger signal are both synchronized with the end of the exposure , the frequency of the trigger signal is exactly half of the frame rate of the camera .
this signal is used to trigger the two light sources and they are switched on respectively during the high or low level period .
it is noteworthy that the digital output port of the camera must be inverted at the immediate end of each exposure rather than after image processing .
this is because the two light sources may be both switched on during one exposure as shown in figure 17 .
4.3 .
images captured in different distances and angles figure 18 shows the relative positional relationship between the sensor and the workpiece .
we would study the images captured in different distances d and angles alpha .
figure 19 shows the captured images when d = 30 mm , 40 mm and alpha = 0degrees , +/ - 5degrees , +/ - 10degrees .
the angle alpha of the images in each row is 0degrees , 5degrees , 10degrees , - 5degreesand - 10degrees respectively ; the distance d of the images in the 1st and 2nd column is 30 mm , while the distance d of the images in the 3rd and 4th column is 40 mm. when the usls is on , the images become darker as the distance d and angle alpha increase .
the intensity of the laser stripes in some images is low because of the specular reflection effects .
all of these images are processed using our algorithm .
figure 20 shows the image processing results of figure 19k,d , of which the imaging qualities are the worst in figure 19 .
the processing results are marked as red curves in figure 20 .
these results indicate that our detection method still works when the distance varies from 30 mm to 40 mm and the angle varies from - 10degrees to 10degrees .
5. experiments of narrow butt detection and discussions 5.1 .
configuration of the experiment platform the experiment platform was established in this paper as shown in figure 21 .
the platform is comprised of a narrow butt detection sensor designed in section 4 , a translational stage , the gtaw welding equipment , and a computing unit .
the sensor is fixed in front of the welding torch .
the translation stage is controlled by acr9000 motion controller , and the workpiece is placed on the terminal of the translation stage , so that the workpiece can move along x - axis and y - axis with the translation stage .
the velocity of each axis can be adjusted during the detection process by software .
the axis of the welding torch is set to be perpendicular to both the x - axis and y - axis of the translational stage .
the computing unit is an industrial computer with 4 gb memory .
the cpu of the computing unit is i7 - 3610 of which the clock frequency is 2.30 ghz .
an automatic path teaching operation is performed before welding using the narrow butt detection sensor .
the workpiece will move along the y - axis at a uniform speed .
meanwhile , the sensor detects the position of the narrow butt , and as a feedback , it is used to adjust the velocity of the x - axis in real time , keeping the narrow butt in the field of view ( fov ) of the camera during the whole teaching process .
after that , the 3d groove path will be obtained , and the desired motion path of the workpiece during welding can be automatically generated offline .
during the welding process , the workpiece will move along the recorded path .
however , the actual welding path may differ from the recorded one due to thermal deformation .
as a result , the sensor has to detect the deviation between the recorded and actual path in real time during welding .
then the motion path of the workpiece will be adjusted automatically to correct the deviation .
figure 22 shows the workpiece samples used in our experiments .
there are two samples : one with the straight path and the other with the s - curve path .
they are both made of aluminum alloy with 5 mm thickness .
5.2 .
motion control system design during path teaching denote the period of the trigger signal mentioned in section 4.2 as ts. at the time t = nts , the normalized pixel deviation between the fov center and the groove center can be expressed as : ( 17 ) e ( n )= pi ( n ) - pf ( n ) m where pi ( n ) and pf ( n ) are the pixel coordinates of the fov center and the groove center detected by our sensor , and m is the total row or column number of the image and it is equals to 2pi ( n ) .
in this paper , we use the pid controller to adjust the velocity of the x - axis .
considering the velocity limit of the x - axis motor , the mathematical model of the controller in time domain is : ( 18 ) v ( n )= min { max { kpe ( n )+ kisumk = 0ne ( k )+ kd [ e ( n ) - e ( n - 1 )] , - vmax } , vmax } where vmax is the maximum velocity of the x - axis , and kp , ki and kd are the gain parameters of the pid controller .
during the period between t = 0 and t = nts , the displacement s ( n ) of the x - axis is : ( 19 ) s ( n )= sumk = 0nv ( k ) ts applying z - transform to equation ( 19 ) , there is : ( 20 ) s ( z )= sumn = 0infinity [ sumk = 0nv ( k ) ts ] z - n = ts1 - z - 1v ( z ) the relationship between the displacement s ( n ) and the pixel coordinate of the groove center is approximately : ( 21 ) po ( n )= s ( n ) r where r is the resolution of the image in mm / pixel .
in summary , the block diagram of the whole control system is shown in figure 23 .
in this paper , the total row number of the image is 1200 ; the resolution r of the image is about 0.0125 mm / pixel ; the frame rate of the camera is 30 fps , and the period of the trigger signal ts is 1 / 15 s ; the maximum velocity vmax of the x - axis is 50 mm / s. the pid parameters kp , ki and kd are set to be 100 , 0.1 and 0 respectively after careful tuning .
figure 24 shows the step response when the deviation between the groove and the center of fov is 5 mm. the settling time ts within +/ - 5 % error is about 0.333 s .
5.3 .
path teaching results and discussions during the path teaching process , the velocity of the y - axis is set to be 3 m / min .
experimental results show that the groove center is always located in the fov of the camera during the whole teaching process .
the time cost of image processing is respectively less than 10 ms and 5 ms when the usls and the lls is switched on. these results show that the proposed method is suitable for real - time detection .
denote the point in the groove path as xi. at the time ti , we can calculate the coordinate xc,i of the point xi in the camera coordinate system { c } using equation ( 16 ) .
according to the coordinate transformation theory , the coordinate of the point xi at the time ti in the torch coordinate system { w } meets ( 22 ) xw,i = rcwxc,i + tcw where rcw and tcw are the rotation and translation matrices between { c } and { w } , which can be both predetermined by the common hand - eye calibration method .
considering the displacements lx,i and ly,i of the translation stage at the time ti , the coordinate of the point xi in { w } at the initial time can be calculated by : ( 23 ) xi = xw,i - [ lx,ily,i0 ]= rcwxc,i + tcw - [ lx,ily,i0 ] a = 1 using equation ( 23 ) , we can calculate the coordinate of each point in the groove path at the initial time .
therefore , the 3d groove path can be reconstructed .
the reconstructed results are shown in figure 25 .
compared with the theoretical cad model in figure 22 , the maximum reconstruction errors are less than 0.45 mm and 0.56 mm. figure 26 shows the comparison between the groove path detected and the motion path of the workpiece during the teaching process .
it can be seen that our proposed control method can perform an accurate tracking task during path teaching .
the maximum deviations between the groove and the motion path are less than 0.11 mm and 0.17 mm .
5.4 .
real - time tracking experiments during welding and discussions the motion path of the workpiece during welding can be automatically generated offline after path teaching .
during the welding process , the actual groove path has to be detected in real time in order to correct the path deviations caused by thermal deformation .
figure 27 shows the gtaw welding scene in the experiments .
figure 28 shows the motion control system during the welding process .
the actual welding path is detected by our visual sensor and as a feedback , it is compared with the teaching path to calculate the deviations .
because the visual sensor is mounted in front of the welding region , the path deviations detected within a period of time must be stored in a first in first out ( fifo ) buffer , in order to correct the path deviation in the welding region , instead of the currently detected deviation in the fov .
the pid parameters of the control system in figure 28 is set to be kp = 100 , ki = 0.1 and kd = 0 after careful tuning .
in our experiments , the welding current and speed are set to be 160 a and 270 mm / min respectively .
figure 29 shows the images captured before and during welding .
comparing figure 29b with figure 29a , although the grayscales of the image during welding are larger overall , there are still significant grayscale differences between the groove and the base metal .
this is mainly because the bandwidth filter in our sensor performs well in eliminating the interferences from the arc and ambient light .
furthermore , the area of the base metal is much larger than the groove , and the grayscale of the base metal is nearly saturated .
as a result , most of the spatters would located in the base metal region , and they would rarely cover the groove , which has little influence on the imaging quality .
in addition , the morphological closing operation of the algorithm in figure 10 would repair the broken groove region even if the spatter covers it. experiment results show that the image processing algorithm in figure 10 performs well during the welding process and its time cost is less than 10 ms. comparing figure 29d with figure 29c , the grayscales of the laser stripes are still much greater than the background although the grayscales of the background increase during welding .
the image may be interfered by the spatters , but it can be effectively eliminated by our proposed algorithm in figure 14 .
only two longest lines are regarded as the laser stripes in our proposed algorithm , so that the spatter in the image can be removed since it is much shorter than the laser stripes .
the time cost of the image processing algorithm in figure 14 is less than 5 ms in our experiments .
as the welding process goes on , the thermal deformation occurs as shown in figure 30 .
the width of the groove increases gradually from about 0.2 mm to 0.8 mm. figure 31 shows the deviation of the groove center between the actual and the teaching path .
the maximum deviation of the groove center is about 0.41 mm. these deviations have been corrected by our proposed control method in figure 31 , and the maximum deviation between the actual path and the motion path of the workpiece has decreased to about 0.33 mm during welding , as shown in figure 31 .
figure 32 shows the workpiece after welding .
besides the experiments mentioned above , 60 experiments are conducted when the welding current varies from 80 a to 200 a , the welding speed varies from 270 mm / min to 600 mm / min , and the materials are chosen are 6609 aluminum alloy , 2219 aluminum alloy , and stainless steel , respectively .
figure 33 shows the distribution of the path deviation between the actual path and the motion path of the workpiece during welding in these experiments .
the deviation is usually less than 0.1 mm and the maximum one reaches less than 0.4 mm. all of these experiments show that our proposed method can resist the interference from the arc light , dust , and spatters .
the proposed visual sensor is able to detect the accurate position of the narrow butt in the actual welding conditions , and the torch keeps aligned with the groove center during the whole welding process .
it indicates that our proposed detection method is suitable in real time seam tracking fields during narrow butt welding of specular reflection workpiece .
6. conclusions this paper proposes a novel and precise visual detection method of narrow butt in specular workpiece welding .
the designed uniform surface light source can create uniform lighting conditions on the workpiece surface and therefore , the grayscale distribution of the captured images is uniform , overcoming the adverse effects of specular reflection .
because of the uniform lighting condition and the reflection characteristic differences between the groove and the base metal , the grayscales of the groove are nearly zero while the grayscales of the base metal are almost saturated in the captured images .
the snr of the images are quite high and the grayscale differences between these two regions are greatly highlighted , which is beneficial to an accurate and efficient detection .
in order to detect the relative position and pose between the torch and the workpiece , we propose a double - line laser method to calculate the equation of the workpiece surface .
a " shutter - synchronized dual light stroboscopic " method is applied to acquiring two kinds of information when the uniform surface light source and the laser light source are both used .
the uniform surface light source and laser light source are switched on alternately , and the camera is synchronized to capture the images when each light is on. in this way , we can obtain the 3d offsets of the groove center , and the relative pose between the torch and the workpiece surface nearly at the same time .
experimental results show that our proposed method is able to detect the narrow butt efficiently and effectively during the actual welding processes .
the resolution of the images is 12.5 mum and the path deviation is less than 0.4 mm after control .
the time cost of image processing is less than 10 ms and 5 ms , respectively , when the uniform surface light source and laser light source are switched on individually .
these results show that the proposed method is suitable for automatic seam tracking during robotic welding processes .
it can be applied to real - time narrow butt detection in specular reflection workpiece ( such as aluminum alloy , titanium alloy , and stainless steel ) welding .
further research will focus on its applications on complex 3d path welding and high - speed high energy beam welding .
acknowledgments the research was financially supported by the national natural science foundation of china under grant number u1537205 and 51375257 .
author contributions jinle zeng wrote the paper , conceived and designed the experiments ; baohua chang and dong du supervised the overall work and reviewed the paper ; yuxiang hong and shuhe chang performed the experiments ; yirong zou analyzed the data .
conflicts of interest the authors declare no conflict of interest .
references 1 .
tsai m.j. lee h.w. ann n.j. machine vision based path planning for a robotic golf club head welding system robot. comput .
- integr. manuf .
2011 27 843 849 10.1016 / j.rcim.2011.01.005 2 .
tsukamoto s. high speed imaging technique part 2 - high speed imaging of power bean welding phenomena sci. technol. weld. join .
2011 16 44 55 10.1179 / 136217110x12785889549949 3 .
zeng j. zou y. du d. research on a visual weld detection method based on invariant moment features ind .
robot int. j. 2015 47 117 128 4 .
du d. zou y. chang b. automatic weld defect method based on kalman filter for real - time radiographic inspection of spiral pipe ndt e int .
2015 72 1 9 5 .
gao x. you d. katayama s. seam tracking monitoring based on adaptive kalman filter embedded elman neural network during high - power fiber laser welding ieee trans. ind. electron .
2012 59 4315 4325 10.1109 / tie.2012.2193854 6 .
you d. gao x. katayama s. wpd - pca - based laser welding process monitoring and defects diagnosis by using fnn and svm ieee trans. ind. electron .
2015 62 628 636 10.1109 / tie.2014.2319216 7 .
you d. gao x. katayama s. multisensor fusion system for monitoring high - power disk laser welding using supporting vector machine ieee trans. ind. inform .
2014 10 1285 1295 8 .
brdf data of aluminum in merl brdf database available online : http :// www.merl.com / brdf ( accessed on 1 september 2014 ) 9 .
zhang l. ye q. yang w. jiao j. weld line detection and tracking via spatial - temporal cascaded hidden markov models and cross structured light ieee trans. instrum. meas .
2014 63 742 753 10.1109 / tim.2013.2283139 10 .
wang z. monitoring of gmaw weld pool from the reflected laser lines for real - time control ieee trans. ind. inform .
2014 10 2073 2083 10.1109 / tii.2014.2349360 11 .
li y. li y.f. wang q.l. xu d. tan m. measurement and defect detection of the weld bead based on online vision inspection ieee trans. instrum. meas .
2010 59 1841 1849 12 .
meta vision system available online : http :// www.meta - mvs.com ( accessed on 15 august 2016 ) 13 .
servo - robot : smart laser vision system for smart robots available online : http :// www.servorobot.com ( accessed on 15 august 2016 ) 14 .
scansonic th6d optical sensor available online : http :// www.scansonic.de / en / products / th6d - optical - sensor ( accessed on 15 august 2016 ) 15 .
villian a.f. acevedo r.g. alvarez e.a. lopez a.c. garcia d.f. fernandez r.u. meana m.j. sanchez j.m.g. low - cost system for weld tracking based on artificial vision ieee trans. ind. appl .
2011 47 1159 1167 10.1109 / tia.2011.2124432 16 .
fang z. xu d. tan m. a vision - based self - tuning fuzzy controller for fillet weld seam tracking ieee / asme trans. mechatron .
2011 16 540 550 10.1109 / tmech.2010.2045766 17 .
huang w. kovacevic r. a laser - based vision system for weld quality inspection sensors 2011 11 506 521 10.3390 / s110100506 22344308 18 .
zhang l. sun j. yin g. zhao j. han q. a cross structured light sensor and stripe segmentation method for visual tracking of a wall climbing robot sensors 2015 15 13725 13751 10.3390 / s150613725 26110403 19 .
gu w. xiong z. wan w. autonomous seam acquisition and tracking system for multi - pass welding based on vision sensor int. j. adv. manuf. technol .
2013 69 451 460 10.1007 / s00170 - 013 - 5034 - 6 20 .
gong z. sun j. zhang g. dynamic measurement for the diameter of a train wheel based on structured - light vision sensors 2016 16 564 10.3390 / s16040564 27104543 21 .
park j.b. lee s.h. lee i.j. precise 3d lug pose detection sensor for automatic robot welding using a structured - light vision system sensors 2009 9 7550 7565 10.3390 / s90907550 22400007 22 .
huang y. xiao y. wang p. li m. a seam - tracking laser welding platform with 3d and 2d visual information fusion vision sensor system int. j. adv. manuf. technol .
2013 67 415 426 10.1007 / s00170 - 012 - 4494 - 4 23 .
zheng j. pan j. weld joint tracking detection equipment and method china patent 201,010,238,686.x 16 januray 2013 24 .
chen h. lei f. xing g. liu w. sun h. visual servo control system for narrow butt seam proceedings of the 25th chinese control and decision conference guiyang , china 25 - 27 may 2013 volume 1 3456 3461 25 .
ma h. wei s. sheng z. lin t. chen s. robot welding seam tracking method based on passive vision for thin plate closed - gap butt welding int. j. adv. manuf. technol .
2010 48 945 953 10.1007 / s00170 - 009 - 2349 - 4 26 .
shen h. lin t. chen s. li l. real - time seam tracking technology of welding robot with visual sensing j. intell. robot. syst .
2010 59 283 298 10.1007 / s10846 - 010 - 9403 - 1 27 .
zhang z. a flexible new technique for camera calibration ieee trans .
pattern anal. mach. intell .
2000 22 1330 1334 10.1109 / 34.888718 figure 1 the structured light detection method used in industry .
( a ) the structured light detection method applied to v - groove detection ; ( b ) the v - groove image captured by the camera .
figure 2 structured light detection method applied to narrow butt detection .
( a ) structured light is projected onto the groove with 1 mm width ; ( b ) captured image when the groove width is 1 mm ; ( c ) structured light is projected onto the groove with less than 0.2 mm width ; ( d ) captured image when the groove width is less than 0.2 mm. figure 3 the reflection characteristic differences between the groove and the base metal .
( a ) the incident light is normal to the surface of the base metal ; ( b ) the incident light is not normal to the surface of the base metal .
figure 4 the spectrum of the arc light during aluminum alloy welding using gtaw method .
figure 5 the designed uniform surface light source and its installation .
( a ) the uniform surface light source ; ( b ) the outermost shell and the led array of the light source ; ( c ) the diffuse shell of the light source ; ( d ) the inner structure of the light source , including the diffuse surface , aperture , and led array ; ( e ) the relative position of the camera , the uniform surface light source , and the workpiece .
figure 6 the simulation process of the uniform surface light source using tracepro .
( a ) the simulation scenario ; ( b ) the result after ray tracing .
figure 7 the fitted abg model of aluminum .
figure 8 the luminous flux distribution in the region 0.5 mm above the top aperture .
( a ) the distance between the usls and the workpiece surface is 30 mm and the reflection characteristic of the workpiece meets equation ( 1 ) ; ( b ) the distance between the usls and the workpiece surface is 30 mm and the workpiece is a perfect diffuser ; ( c ) the distance between the usls and the workpiece surface is 40 mm and the reflection characteristic of the workpiece meets equation ( 1 ) ; ( d ) the distance between the usls and the workpiece surface is 40 mm and the workpiece is a perfect diffuser ; ( e ) the distance between the usls and the workpiece surface is 50 mm and the reflection characteristic of the workpiece meets equation ( 1 ) ; ( f ) the distance between the usls and the workpiece surface is 50 mm and the workpiece is a perfect diffuser .
figure 9 the original captured images of aluminum alloy with different surface roughness .
( a ) the surface roughness is about 12.5 mum ; ( b ) the surface roughness is about 6.3 mum ; ( c ) the surface roughness is about 3.2 mum ; ( d ) the surface roughness is about 1.6 mum ; ( e ) the surface roughness is about 0.8 mum .
figure 10 the image processing algorithm of narrow butt detection .
figure 11 the processing result of each step of the narrow butt detection algorithm .
( a ) the original captured image ; ( b ) the image after the canny operator is applied ; ( c ) the image after morphological closing operation ; ( d ) the image after connected domain extraction and thresholding based on domain area ; ( e ) the image after domain selection according to area - to - perimeter ratio ; ( f ) the image after groove center calculation .
the final detected results are marked as red curve .
figure 12 the principle of the double - line laser method .
figure 13 the original captured image of the cross line laser stripe .
figure 14 the image processing algorithm when laser light source is on. figure 15 configuration of the established narrow butt detection sensor .
figure 16 the correct method of generating the trigger signal .
figure 17 the incorrect way of generating the trigger signal .
figure 18 relative positional relationship between the sensor and the workpiece .
figure 19 images captured in different distances d and angles alpha .
( a ) usls is on and d = 30 mm , alpha = 0degrees ; ( b ) lls is on and d = 30 mm , alpha = 0degrees ; ( c ) usls is on and d = 40 mm , alpha = 0degrees ; ( d ) lls is on and d = 40 mm , alpha = 0degrees ; ( e ) usls is on and d = 30 mm , alpha = 5degrees ; ( f ) lls is on and d = 30 mm , alpha = 5degrees ; ( g ) usls is on and d = 40 mm , alpha = 5degrees ; ( h ) lls is on and d = 40 mm , alpha = 5degrees ; ( i ) usls is on and d = 30 mm , alpha = 10degrees ; ( j ) lls is on and d = 30 mm , alpha = 10degrees ; ( k ) usls is on and d = 40 mm , alpha = 10degrees ; ( l ) lls is on and d = 40 mm , alpha = 10degrees ; ( m ) usls is on and d = 30 mm , alpha = - 5degrees ; ( n ) lls is on and d = 30 mm , alpha = - 5degrees ; ( o ) usls is on and d = 40 mm , alpha = - 5degrees ; ( p ) lls is on and d = 40 mm , alpha = - 5degrees ; ( q ) usls is on and d = 30 mm , alpha = - 10degrees ; ( r ) lls is on and d = 30 mm , alpha = - 10degrees ; ( s ) usls is on and d = 40 mm , alpha = - 10degrees ; ( t ) lls is on and d = 40 mm , alpha = - 10degrees .
figure 20 image processing results .
( a ) image processing results of figure 19k ; ( b ) image processing results of figure 19d .
figure 21 the established experiment platform for narrow butt detection .
figure 22 the cad model of the workpiece samples .
( a ) a workpiece with the straight line path ; ( b ) a workpiece with the s - curve path .
figure 23 the block diagram of the control system .
figure 24 the step response of the proposed control system .
figure 25 the 3d reconstruction of the groove path .
( a ) the straight line path ; ( b ) the s - curve path .
figure 26 comparison between the groove path detected and the motion path of the workpiece .
( a ) the straight line path ; ( b ) the s - curve path .
figure 27 the welding scene in our experiments .
figure 28 the motion control system during the welding process .
figure 29 images captured before and during welding .
( a ) the narrow butt image when the usls is on before welding ; ( b ) the narrow butt image when the usls is on during welding ; ( c ) the laser stripe image when the lls is on before welding ; ( d ) the laser stripe image when the lls is on during welding .
figure 30 the narrow butt images captured during welding .
( a ) the image captured at the earlier time ; ( b ) the image captured at the later time .
figure 31 the path deviation during welding .
( a ) the path deviation during welding straight path ; ( b ) the path deviation during welding s - curve path .
figure 32 the welded workpiece with narrow butt .
( a ) the workpiece with the straight path ; ( b ) the workpiece with the s - curve path .
figure 33 the distribution of path deviation between the actual path and the motion path of the workpiece during welding .
sensors - 16 - 01480 - t001 _ table 1 table 1 the separation degree between the base metal and the groove region in figure 9 .
figure 9 separation degree a 3.740 b 4.354 c 4.657 d 3.581 e 1.973